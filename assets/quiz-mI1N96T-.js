import{r as f,c as p,f as y,u as s,a as o,t as w,b as h,d as x,g as I,F as q,p as N,k as S,o as n,w as C,v as D,l as V}from"./index-CwIRFKx0.js";import{_ as $}from"./backComponent-D3BFl8YC.js";import{_ as B}from"./error-CknHqRNW.js";import{_ as G}from"./successMessage-wI-VHyJP.js";import{u as M}from"./studentData-CoaBhV-D.js";import{u as Q}from"./quizData-DemVtmlC.js";import{u as A}from"./quizGrades-BAqxXVAX.js";const E={class:"w-full h-screen flex flex-col gap-10 items-center pt-10 pb-5"},L={class:"flex flex-col gap-2"},j={class:"text-xl text-center"},F={class:"w-2/5 max-md:w-4/5 border border-blue-600 border-x-0 border-t-0 flex flex-col gap-3 pb-2"},R={class:"text-lg rounded"},U=["onUpdate:modelValue"],X={__name:"quiz",setup(Y){M();const z=Q(),_=A(),b=S();V();const d=Number(b.params.id),g=Number(b.params.quizId);let a=f(),u=f();const t=z.quizes.find(i=>i.id===g);let r=f([]);r.value=Array(t.questions.length).fill("");function k(){const i=t.questions;if(r.value.length!==i.length){console.error("Error: Please answer all the questions."),a.value="You must answer all the questions before submitting.",u.value="";return}if(r.value.some(e=>!e.trim())){console.error("Error: Some answers are empty."),a.value="All answers must be filled out before submitting.",u.value="";return}if(_.quizGrades.find(e=>e.studentId===d)){a.value="Cannot redo quiz",u.value="";return}const c=r.value.reduce((e,l,v)=>e+(l.trim().toLowerCase()===t.answers[v].toLowerCase()?Number(t.points[v]):0),0);u.value=`You got ${c} out of ${t.points.reduce((e,l)=>e+l,0)}.`,console.log("Done",r.value.length,r.value),_.addGrades(t.teacherId,d,g,c),a.value=""}return(i,m)=>(n(),p(q,null,[y($,{link:"studentSubjects",id:s(d),class:"absolute top-2 left-2"},null,8,["id"]),o("div",E,[o("div",L,[o("h1",j,w(s(t).title),1),s(a)?(n(),h(B,{key:0,"error-message":s(a)},null,8,["error-message"])):x("",!0),s(u)?(n(),h(G,{key:1,"success-message":s(u)},null,8,["success-message"])):x("",!0)]),o("form",{action:"",onSubmit:m[0]||(m[0]=I(()=>{},["prevent"])),class:"w-full flex flex-col gap-5 justify-center items-center"},[(n(!0),p(q,null,N(s(t).questions,(c,e)=>(n(),p("div",F,[o("p",R,w(c)+"?",1),C(o("input",{"onUpdate:modelValue":l=>s(r)[e]=l,type:"text",name:"",placeholder:"Answer",class:"w-full pl-2 border border-gray-400 rounded"},null,8,U),[[D,s(r)[e]]])]))),256)),o("button",{onClick:k,class:"w-2/5 max-md:w-4/5 bg-blue-600 rounded text-white"},"Submit answers")],32)])],64))}};export{X as default};
