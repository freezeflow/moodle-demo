import{r as a,c as g,f as w,a as l,u as t,b as V,d as _,g as b,w as h,v as q,i as c,x as z,t as L,n as S,y as C,F as O,k as A,o as p,l as G}from"./index-CwIRFKx0.js";import{_ as P}from"./teacherNav-BUhn-0PW.js";import{_ as H}from"./error-CknHqRNW.js";import{_ as I}from"./successMessage-wI-VHyJP.js";import{D as j}from"./dropdown-CU-M8jxB.js";import{f as o,i as J}from"./formUtilities-b0G78jVk.js";import{u as K}from"./teacherData-Des5ZfOl.js";import{u as Q}from"./noticeData-zuiXsLA4.js";import"./studentData-CoaBhV-D.js";import"./parentsData-nJOEJgqE.js";import"./messageData-C00oRMPq.js";/* empty css                                                                 */const W={class:"w-full h-screen flex flex-col justify-center items-center gap-5"},X={class:"flex flex-col gap-2 items-center"},Y={for:"file-upload",class:"text-gray-400 cursor-pointer max-sm:text-sm overflow-hidden whitespace-nowrap text-ellipsis"},Z={key:0},$={key:1},ee={class:"w-2/5 max-md:w-4/5 max-md:mb-14 h-8 flex flex-row max-md:flex-col max-md:gap-5 justify-between"},se={class:"flex flex-row w-2/5 max-md:w-4/5 max-md:text-sm justify-between"},le={for:""},te={for:""},we={__name:"Create notice",setup(ae){const F=K(),N=Q(),E=A();G();const y=Number(E.params.id),D=a([]),k=a([]),f=a(null);let x=a(""),v=a(""),n=a(),i=a(),u=a(),d=a(!1),m=a(!1);F.teachers.find(r=>r.id===y).assignedClassesAndSubjects.forEach(r=>{const[e,s]=r.split(" - ");D.value.push(Number(e)),k.value.push(s)});const M=[...new Set(k.value)],U=[...new Set(D.value)];function B(r){o.handleDrop(r,f)}function R(r){o.handleFileSelect(r,f)}function T(){if(o.checkEmptyFields(u.value)){x.value="Please fill in non-optional field";return}o.checkEmptyFields(i.value)&&(i.value=null),o.checkEmptyFields(n.value)&&(n.value=null),N.addNotice(y,u.value,d.value,m.value,n.value,i.value),v.value="Notice created"}return(r,e)=>(p(),g(O,null,[w(P,{class:"fixed z-50"}),l("div",W,[l("div",X,[e[8]||(e[8]=l("h2",{class:"text-2xl"},"Create notice",-1)),t(x)?(p(),V(H,{key:0,"error-message":t(x)},null,8,["error-message"])):_("",!0),t(v)?(p(),V(I,{key:1,"success-message":t(v)},null,8,["success-message"])):_("",!0)]),l("form",{action:"",class:"w-full flex flex-col justify-center items-center gap-5",onSubmit:e[7]||(e[7]=b(()=>{},["prevent"]))},[h(l("input",{"onUpdate:modelValue":e[0]||(e[0]=s=>c(u)?u.value=s:u=s),type:"text",name:"",id:"",placeholder:"Notice message",class:"border border-blue-600 w-2/5 max-md:w-4/5 h-8 rounded pl-2"},null,512),[[q,t(u)]]),l("div",{class:z(["relative border border-blue-600 w-2/5 max-md:w-4/5 h-8 rounded flex items-center pl-2",{"bg-blue-100":t(J)}]),onDragover:e[1]||(e[1]=b((...s)=>t(o).handleDragOver&&t(o).handleDragOver(...s),["prevent"])),onDragleave:e[2]||(e[2]=(...s)=>t(o).handleDragLeave&&t(o).handleDragLeave(...s)),onDrop:b(B,["prevent"])},[l("input",{class:"absolute inset-0 w-full h-full opacity-0 cursor-pointer",type:"file",name:"",id:"",onChange:R},null,32),l("label",Y,[f.value?(p(),g("span",$,L(f.value.name),1)):(p(),g("span",Z,"Drop or click to upload files (optional)"))])],34),l("div",ee,[w(j,{class:"w-2/5 max-md:w-full",modelValue:t(i),"onUpdate:modelValue":e[3]||(e[3]=s=>c(i)?i.value=s:i=s),"options-width":"2/5",options:M,placeholder:"Subjects (optional)"},null,8,["modelValue"]),w(j,{class:"w-2/5 max-md:w-full",modelValue:t(n),"onUpdate:modelValue":e[4]||(e[4]=s=>c(n)?n.value=s:n=s),"options-width":"",options:U,placeholder:"Classes (optional)"},null,8,["modelValue"])]),l("div",se,[l("label",le,[e[9]||(e[9]=S(" Email registered parents: ")),h(l("input",{type:"checkbox","onUpdate:modelValue":e[5]||(e[5]=s=>c(d)?d.value=s:d=s),name:"",id:""},null,512),[[C,t(d)]])]),l("label",te,[e[10]||(e[10]=S(" Sms registered parents: ")),h(l("input",{type:"checkbox","onUpdate:modelValue":e[6]||(e[6]=s=>c(m)?m.value=s:m=s),name:"",id:""},null,512),[[C,t(m)]])])]),l("button",{onClick:T,class:"w-2/5 max-md:w-4/5 h-8 bg-blue-600 text-white rounded"},"Create notice")],32)])],64))}};export{we as default};
