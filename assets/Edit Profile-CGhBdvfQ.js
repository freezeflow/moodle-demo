import{m as S,A as j,r as n,c as F,f as b,u as t,a as s,b as D,d as N,g as I,w as r,v as m,e as C,F as T,k as $,j as h,o as v,l as O}from"./index-CwIRFKx0.js";import{_ as R}from"./back-B_79b8KM.js";import{_ as A}from"./error-CknHqRNW.js";import{_ as L}from"./successMessage-wI-VHyJP.js";import{u as q}from"./parentsData-nJOEJgqE.js";import{f as z}from"./formUtilities-b0G78jVk.js";const G={class:"w-full h-screen flex flex-col justify-center items-center gap-2"},H={class:"flex flex-col justify-center items-center gap-1"},J={class:"w-full flex flex-col"},K={class:"w-full flex flex-col"},Q={class:"w-full flex flex-col"},W={class:"w-full flex flex-col"},X={class:"w-full flex flex-col"},Y={class:"flex flex-row w-full"},Z=["type"],ee={class:"w-full flex flex-col"},se={class:"flex flex-row"},le=["type"],ie={__name:"Edit Profile",setup(oe){var y,g,_,k;const U=$();O();const c=Number(U.params.id),x=q(),a=S(()=>x.parents.find(P=>P.id===c)),l=j({name:((y=a.value)==null?void 0:y.name)||"",surname:((g=a.value)==null?void 0:g.surname)||"",email:((_=a.value)==null?void 0:_.email)||"",contact:((k=a.value)==null?void 0:k.mobileNum)||"",newpass:"",oldpass:"",uploadDate:new Date().toLocaleString()||""});let d=n("eye-slash"),i=n("password"),p=n("eye-slash"),f=n("password"),u=n(),w=n();function M(){p.value==="eye-slash"&&f.value==="password"?(p.value="eye",f.value="text"):(p.value="eye-slash",f.value="password")}function E(){d.value==="eye-slash"&&i.value==="password"?(d.value="eye",i.value="text"):(d.value="eye-slash",i.value="password")}function B(){if(z.checkEmptyFields(l.oldpass)){u.value="Please enter your current password";return}if(l.oldpass!==a.value.password){u.value="Incorrect password",console.log(a.value.password);return}l.newpass===""&&(l.newpass=a.value.password),u.value="",w.value="Changes successfully saved",x.updateParent(c,l.name,l.surname,l.email,l.contact,l.newpass)}return(P,e)=>{const V=h("font-awesome-icon");return v(),F(T,null,[b(R,{link:"parentDashboard",id:t(c),class:"fixed top-3 left-3"},null,8,["id"]),s("div",G,[s("div",H,[e[7]||(e[7]=s("h1",{class:"text-xl"},"Edit profile",-1)),t(u)?(v(),D(A,{key:0,"error-message":t(u)},null,8,["error-message"])):N("",!0),t(w)?(v(),D(L,{key:1,"success-message":t(w)},null,8,["success-message"])):N("",!0)]),s("form",{action:"",onSubmit:e[6]||(e[6]=I(()=>{},["prevent"])),class:"w-2/5 flex flex-col gap-3"},[s("div",J,[e[8]||(e[8]=s("label",{for:""},"Name:",-1)),r(s("input",{type:"text",class:"border border-blue-600 rounded p-1","onUpdate:modelValue":e[0]||(e[0]=o=>l.name=o)},null,512),[[m,l.name]])]),s("div",K,[e[9]||(e[9]=s("label",{for:""},"Surname:",-1)),r(s("input",{type:"text",class:"border border-blue-600 rounded p-1","onUpdate:modelValue":e[1]||(e[1]=o=>l.surname=o)},null,512),[[m,l.surname]])]),s("div",Q,[e[10]||(e[10]=s("label",{for:""},"Email:",-1)),r(s("input",{type:"text",class:"border border-blue-600 rounded p-1","onUpdate:modelValue":e[2]||(e[2]=o=>l.email=o)},null,512),[[m,l.email]])]),s("div",W,[e[11]||(e[11]=s("label",{for:""},"Mobile number:",-1)),r(s("input",{type:"text",class:"border border-blue-600 rounded p-1","onUpdate:modelValue":e[3]||(e[3]=o=>l.contact=o)},null,512),[[m,l.contact]])]),s("div",X,[e[12]||(e[12]=s("label",{for:""},"New password:",-1)),s("div",Y,[r(s("input",{"onUpdate:modelValue":e[4]||(e[4]=o=>l.newpass=o),class:"border border-blue-600 rounded-l w-full p-1",type:t(i),name:""},null,8,Z),[[C,l.newpass]]),s("button",{class:"w-8 bg-blue-600 rounded-r",onClick:E},[b(V,{icon:t(d)},null,8,["icon"])])])]),s("div",ee,[e[13]||(e[13]=s("label",{for:""},"Old password:",-1)),s("div",se,[r(s("input",{"onUpdate:modelValue":e[5]||(e[5]=o=>l.oldpass=o),class:"border border-blue-600 rounded-l w-full p-1",type:t(f),name:""},null,8,le),[[C,l.oldpass]]),s("button",{class:"w-8 bg-blue-600 rounded-r",onClick:M},[b(V,{icon:t(p)},null,8,["icon"])])])]),s("button",{class:"w-full h-8 bg-blue-600 text-white rounded",onClick:B},"Confirm changes"),e[14]||(e[14]=s("button",{class:"w-full h-8 bg-blue-950 text-white rounded"},"Delete profile",-1))],32)])],64)}}};export{ie as default};
